<ion-header>

  <ion-navbar color="primary">
    <ion-title>Minhas reformas</ion-title>
  </ion-navbar>

  <ion-toolbar class="tabs" no-padding >
    <ion-segment [(ngModel)]="tiposReformas">
      <ion-segment-button value="minhas">
        Minhas
      </ion-segment-button>
      <ion-segment-button value="execucao">
        Em execução
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content padding>
  <div [ngSwitch]="tiposReformas">
    <div *ngSwitchCase="'minhas'">
      <div *ngIf="showNone" id="development">
        Nenhuma reforma cadastrada<br><span>:(</span>
      </div>
      <ion-card *ngFor="let ref of reformasNovo" class="reforma-card" tappable (click)="abrirDetalhes(ref)">
        <ion-grid>
          <ion-row>
            <ion-col col-10>
              <h1>{{ref.nome}}</h1>
            </ion-col>
            <ion-col col-2>
              <button ion-button color="dark" clear (click)="mostraOpcoes($event, ref.id)">
                <ion-icon name="more"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-6>
              <ion-icon name="calendar"></ion-icon> {{ getDate(ref.datainicio) }}</ion-col>
            <ion-col col-6 class="align-right">
              <ion-badge item-end>{{ref.listaProfissionais.length}}</ion-badge> Profissionais</ion-col>
          </ion-row>
        </ion-grid>
          <p>{{ref.descricao}}</p>
      </ion-card>
    </div>

    <div *ngSwitchCase="'execucao'">
      <div *ngIf="showNoneExec" id="development">
        Nenhuma reforma em execução<br><span>:(</span>
      </div>
      <ion-card *ngFor="let ref of reformaAndamento" class="reforma-card" tappable (click)="abrirDetalhes(ref)">
        <ion-grid>
          <ion-row>
            <ion-col col-10>
              <h1>{{ref.nome}}</h1>
            </ion-col>
            <ion-col col-2>
              <button ion-button color="dark" clear (click)="mostraOpcoes($event, ref.id)">
                <ion-icon name="more"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-6>
              <ion-icon name="calendar"></ion-icon> {{ getDate(ref.datainicio) }}</ion-col>
            <ion-col col-6 class="align-right">
              <ion-badge item-end>{{ref.listaProfissionais.length}}</ion-badge> Profissionais</ion-col>
          </ion-row>
        </ion-grid>
        <p>{{ref.descricao}}</p>
      </ion-card>
    </div>
  </div>

</ion-content>

<ion-footer>
  <ion-fab right bottom *ngIf="tiposReformas == 'minhas'">
    <button ion-fab (click)="criarReforma()">
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>
</ion-footer>
